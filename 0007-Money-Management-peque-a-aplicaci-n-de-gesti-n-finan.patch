From 6f65c9cb49133dbe756fb9570dc28f1e0653863c Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Daniel=20Rodr=C3=ADguez?= <electronlibre88@gmail.com>
Date: Tue, 14 Feb 2012 21:02:14 +0100
Subject: [PATCH 7/9] =?UTF-8?q?Money=20Management,=20peque=C3=B1a=20aplicaci?=
 =?UTF-8?q?=C3=B3n=20de=20gesti=C3=B3n=20financiera=20personal?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

---
 MMeel/MMeel.py     |  387 +++++++++++++++++++++++++++++++++++
 MMeel/MMeel.ui     |  571 ++++++++++++++++++++++++++++++++++++++++++++++++++++
 MMeel/MMeel_ui.py  |  228 +++++++++++++++++++++
 MMeel/mplwidget.py |   42 ++++
 4 files changed, 1228 insertions(+), 0 deletions(-)
 create mode 100644 MMeel/MMeel.py
 create mode 100644 MMeel/MMeel.ui
 create mode 100644 MMeel/MMeel_ui.py
 create mode 100644 MMeel/mplwidget.py

diff --git a/MMeel/MMeel.py b/MMeel/MMeel.py
new file mode 100644
index 0000000..2d90610
--- /dev/null
+++ b/MMeel/MMeel.py
@@ -0,0 +1,387 @@
+# -*- coding: utf-8 -*-
+
+import sys
+from PyQt4 import QtCore, QtGui
+import sqlite3
+from MMeel_ui import Ui_Hucha
+import re
+
+class MMeelclass(QtGui.QMainWindow):
+    def __init__(self, parent=None):
+#        locale=unicode(QtCore.QLocale.system().name())
+        QtGui.QWidget.__init__(self, parent)
+        self.ui = Ui_Hucha()
+        self.ui.setupUi(self)
+        self.ui.dateEdit.setDate(QtCore.QDate.currentDate ())
+        self.iniciarbasededatos()
+        self.actualizarBase()
+        self.actualizarCuentas()
+        self.Centrar()
+        self.editando=False
+        self.DibujarTotal()
+        QtCore.QObject.connect(self.ui.boton_Ok,QtCore.SIGNAL("clicked()"
+        ), self.IngresarOperacion)
+        QtCore.QObject.connect(self.ui.boton_Borrar,QtCore.SIGNAL("clicked()"
+        ), self.BorrarOperacion)
+        QtCore.QObject.connect(self.ui.boton_Editar,QtCore.SIGNAL("clicked()"
+        ), self.EditarOperacion)
+        QtCore.QObject.connect(self.ui.boton_Cancelar,QtCore.SIGNAL("clicked()"
+        ), self.CancelarEdicion)
+        QtCore.QObject.connect(self.ui.boton_Hucha,QtCore.SIGNAL("clicked()"
+        ), self.DibujarHucha)
+        QtCore.QObject.connect(self.ui.boton_Banco,QtCore.SIGNAL("clicked()"
+        ), self.DibujarBanco)
+        QtCore.QObject.connect(self.ui.boton_Total,QtCore.SIGNAL("clicked()"
+        ), self.DibujarTotal)
+    
+    def Centrar(self):
+        
+        qr = self.frameGeometry()
+        cp = QtGui.QDesktopWidget().availableGeometry().center()
+        qr.moveCenter(cp)
+        self.move(qr.topLeft())
+        geometria=self.ui.tableWidget.geometry()
+        anchoTabla= geometria.width()
+        anchoColumna = (anchoTabla-2)/5.0
+        for i in range(5):
+            self.ui.tableWidget.setColumnWidth(i,anchoColumna)
+        
+    def EditarOperacion(self):
+        self.editando=True
+        self.ui.boton_Cancelar.setEnabled(True)
+        self.ui.boton_Borrar.setEnabled(False)
+        #Esta parte es igual en la funcion BorrarOperacion
+        #FIXME esta parte esta poco optimizada, se consigue la misma variable (row) de 2 maneras...
+        #print 'linea seleccionada:' + linea
+        self.filaeditada=self.ui.tableWidget.currentRow()
+        self.elementoseditados=[]
+        for i in range(5):
+            itemText = self.ui.tableWidget.item(self.ui.tableWidget.currentRow(), i).text()    
+            print 'itemText: ' + itemText
+            self.elementoseditados.append(str(itemText))
+        #insertamos los datos de la tabla en sus lugares correspondientes
+        if self.elementoseditados[0]=='Ingreso': self.ui.combo_Tipo.setCurrentIndex(0)
+        elif self.elementoseditados[0]=='Gasto': self.ui.combo_Tipo.setCurrentIndex(1)
+        if self.elementoseditados[1]=='Banco': self.ui.combo_Lugar.setCurrentIndex(0)
+        elif self.elementoseditados[1]=='Hucha': self.ui.combo_Lugar.setCurrentIndex(1)
+        self.ui.text_Comentarios.setText(self.elementoseditados[2])
+        self.ui.text_Cantidad.setText(self.elementoseditados[4])
+        self.ui.dateEdit.setDate(QtCore.QDate.fromString(self.elementoseditados[3],"dd/MM/yyyy"))
+
+    def CancelarEdicion(self):
+        self.editando=0
+        self.ui.boton_Cancelar.setEnabled(False)
+        self.ui.boton_Borrar.setEnabled(True)
+        
+    def BorrarOperacion(self):
+        #lineas=self.ui.tableWidget.selectionModel().selectedRows()
+        #linea=lineas[len(lineas)-1]
+        lineaSeleccionada=self.ui.tableWidget.currentRow()
+        #print 'linea seleccionada:' + linea
+        #fila=linea.row()
+        elementos=[]
+        for i in range(5):
+            itemText = self.ui.tableWidget.item(lineaSeleccionada, i).text()    
+            print 'itemText: ' + itemText
+            elementos.append(str(itemText))
+        print elementos
+        
+        self.cursor.execute('DELETE FROM Operaciones WHERE Tipo=? AND Lugar=? AND Comentarios=? AND Fecha=? AND Cantidad=?',(elementos[0],elementos[1],elementos[2],elementos[3],elementos[4]))
+        #print fila           
+        self.conexion.commit()
+        self.actualizarBase()
+        self.actualizarCuentas()
+        
+    def IngresarOperacion(self):
+        
+#Asignamos cada valor que queremos ingresar a una variable
+        self.tipo = str(self.ui.combo_Tipo.currentText())
+        self.lugar = str(self.ui.combo_Lugar.currentText())
+        self.fecha = self.ui.dateEdit.date()
+        self.comentario = str(self.ui.text_Comentarios.toPlainText())     
+        self.cantidad = self.ui.text_Cantidad.toPlainText()
+        if self.cantidad == "": self.cantidad = 0
+        else: self.cantidad = float(self.cantidad)
+        dia = self.fecha.day()
+        mes = self.fecha.month()
+        anno = self.fecha.year()
+        self.fecha = str(dia) + '/' + str(mes) + '/' + str(anno)
+        print self.editando
+        #self.fecha=str(anno) +'-'+str(mes)+'-'+str(dia)
+        if self.editando == False:
+    #Pasamos los nuevos datos a la base de datos
+            self.datos=(self.tipo, self.lugar, self.comentario, self.fecha,self.cantidad)
+            print self.fecha
+            self.cursor.execute('INSERT INTO Operaciones (Tipo,Lugar,Comentarios,Fecha,Cantidad) VALUES(?,?,?,?,?)',self.datos)
+            self.conexion.commit()
+            
+    #AÃ±adimos la fila nueva a la tabla
+#            self.numerodefilas += 1
+#            self.ui.tableWidget.setRowCount(self.numerodefilas)
+#            for dato in range(len(self.datos)):
+#                
+#                elemento= self.datos[dato]
+#                print 'elemento = ' + str(elemento)
+#                item=None
+#                item = QtGui.QTableWidgetItem()
+#                item.setText(QtGui.QApplication.translate("Hucha", str(elemento), None, QtGui.QApplication.UnicodeUTF8))
+#                self.ui.tableWidget.setItem(self.numerodefilas-1,dato,item)
+            self.actualizarBase()
+        elif self.editando == True:
+            #Actualizamos la base de datos
+            self.datoseditados=(self.tipo, self.lugar, self.comentario, self.fecha,self.cantidad,\
+            self.elementoseditados[0],self.elementoseditados[1],self.elementoseditados[2],\
+            self.elementoseditados[3],self.elementoseditados[4])
+            print self.fecha
+            #self.cursor.execute('UPDATE Operaciones SET (Tipo,Lugar,Comentarios,Fecha,Cantidad) VALUES(?,?,?,?,?) WHERE Tipo=? AND Lugar=? AND Comentarios=? AND Fecha=? AND Cantidad=?',self.datos)
+            self.cursor.execute('UPDATE Operaciones SET Tipo=?,Lugar=?,Comentarios=?,Fecha=?,Cantidad=? WHERE Tipo=? AND Lugar=? AND Comentarios=? AND Fecha=? AND Cantidad=?',self.datoseditados)
+            self.conexion.commit()
+            
+            #Editamos la fila ...
+#            self.datos=(self.tipo, self.lugar, self.comentario, self.fecha,self.cantidad)
+#            for dato in range(5):
+#                
+#                elemento= self.datos[dato]
+#                print 'elemento = ' + str(elemento)
+#                item=None
+#                item = QtGui.QTableWidgetItem()
+#                item.setText(QtGui.QApplication.translate("Hucha", str(elemento), None, QtGui.QApplication.UnicodeUTF8))
+#                self.ui.tableWidget.setItem(self.numerodefilas-1,dato,item)
+            self.editando=0
+            self.ui.boton_Cancelar.setEnabled(False)
+            self.ui.boton_Borrar.setEnabled(True)
+            self.actualizarBase( )
+        self.actualizarCuentas()
+        
+        print str(anno) +'-'+str(mes)+'-'+str(dia)
+        
+        print self.comentario
+        print self.cantidad
+        #print self.fecha
+        #self.fecha = self.fecha.toString(QtCore.QDate.ISODate())
+        print self.lugar
+        print self.tipo
+        
+        #item = QtGui.QTableWidgetItem()
+        #item.setText(QtGui.QApplication.translate("Hucha", "Operacionrealizada", None, QtGui.QApplication.UnicodeUTF8))
+        #self.ui.tableWidget.setItem(0, 0, item)
+
+    def iniciarbasededatos(self):
+        import os.path
+        camino = os.path.abspath('basehucha.db')
+        print camino
+        print os.path.isfile(camino)
+#Si la base de datos existe, la cargamos; si no, la creamos
+        if not os.path.isfile(camino):
+            self.conexion = sqlite3.connect('basehucha.db')
+            print 'Base creada'
+            self.cursor = self.conexion.cursor()
+            self.cursor.execute("CREATE TABLE Operaciones (Id INTEGER PRIMARY KEY, Tipo TEXT, Lugar TEXT, Comentarios TEXT, Fecha TEXT, Cantidad INT)")
+            print 'Tabla creada'
+            self.conexion.commit()
+        else:
+            self.conexion = sqlite3.connect('basehucha.db')
+            print 'Base conectada'
+            self.cursor = self.conexion.cursor()
+
+    def actualizarBase(self):
+        
+#Cargamos la base de datos y la colocamos en la tabla
+
+        self.cursor.execute("SELECT * FROM Operaciones")
+        filas = self.cursor.fetchall()
+        self.numerodefilas=len(filas)
+        self.ui.tableWidget.setRowCount(self.numerodefilas)
+        #print filas[0]
+        self.listatotal = []
+        for j in range(self.numerodefilas):
+
+            fila = filas[j]
+            for i in range(1,len(fila)):
+                elemento = fila[i]
+                print 'elemento= '+ str(elemento)
+                #print i
+                elemento = str(elemento)
+                #Da complicaciones al manejar los datos if i == 5 : elemento = elemento + 'â¬'
+                if elemento == 'None' : elemento = ' '
+                item=None
+                item = QtGui.QTableWidgetItem()
+                item.setText(QtGui.QApplication.translate("Hucha", str(elemento), None, QtGui.QApplication.UnicodeUTF8))
+                self.ui.tableWidget.setItem(j,i-1,item)  
+            self.listatotal.append((fila[1], fila[2], fila[4], fila[5])) #self.listatotal es una lista de tuplas, cada tupla es 
+            print self.listatotal
+            
+            
+        
+
+    
+    def actualizarCuentas(self):
+        self.hucha=0
+        self.banco=0
+        self.total=0
+        self.cursor.execute("SELECT * FROM Operaciones")
+        filas = self.cursor.fetchall()
+        for j in range(self.numerodefilas):
+            fila = filas[j]
+            if fila[2].lower() == 'hucha':
+                if fila[1].lower() == 'ingreso':
+                    self.hucha += float(fila[5])
+                elif fila[1].lower() == 'gasto':
+                    self.hucha -= float(fila[5])
+            elif fila[2].lower() == 'banco':
+                if fila[1].lower() == 'ingreso':
+                    self.banco += float(fila[5])
+                elif fila[1].lower() == 'gasto':
+                    self.banco -= float(fila[5])
+        self.total=self.banco + self.hucha
+        self.ui.label_Hucha.setText(str(self.hucha))
+        self.ui.label_Banco.setText(str(self.banco))
+        self.ui.label_Total.setText(str(self.total))
+        
+#    def ParseTable(self,filtro):
+#        for fila in range(self.numerodefilas):
+#            for columna in range(4):
+                
+    
+#    def DibujarTotal(self, tipo):
+#        lista=[]
+#        suma=0
+#        for operacion in range(self.numerodefilas):
+#            fila = self.listatotal[operacion]
+#            
+    def DibujarTotal(self):
+ 
+        if self.numerodefilas is not 0:
+            lista=[]
+            operaciones = []
+            x = []
+            suma=0
+            self.ui.mpl.canvas.ax1.clear()        
+            self.ui.mpl.canvas.ax2.clear()
+            self.ui.mpl.canvas.width= 600
+            self.ui.mpl.canvas.ax1.axes.set_xlim(0,self.numerodefilas)
+            self.ui.mpl.canvas.ax1.axes.set_ylabel('Operaciones')
+            self.ui.mpl.canvas.ax2.axes.set_ylabel('Total', color='blue')
+            self.ui.mpl.canvas.ax1.axhline(y=0, color='black')
+            self.ui.mpl.canvas.ax2.axhline(y=0, color='black')
+            ancho = 0.5
+            for operacion in range(self.numerodefilas):
+                fila = self.listatotal[operacion]
+                print 'datos= ' + str(len(fila)) + '  ' + str(fila[3])
+                operaciones.append(fila[3])
+                if fila[0] == 'Ingreso':
+                    suma += fila[3]
+                    self.ui.mpl.canvas.ax1.bar(operacion+ancho/2-operacion/self.numerodefilas,fila[3], width=ancho,  color = 'green')
+                elif fila[0] == 'Gasto':
+                    suma -= fila[3]
+                    self.ui.mpl.canvas.ax1.bar(operacion+ancho/2-operacion/self.numerodefilas,-fila[3], width=ancho,  color='red')
+                lista.append(suma)
+                x.append(operacion+ancho-operacion/self.numerodefilas)
+            print operaciones
+            self.ui.mpl.canvas.ax1.set_ylim(-1.1*max(operaciones),1.1*max(operaciones))            
+                #print 'LISTA= ' +  str(lista)
+            self.ui.mpl.canvas.ax2.plot(x,lista, '-o', color='blue')
+            self.ui.mpl.canvas.draw()
+
+    def DibujarHucha(self):
+        self.ui.mpl.canvas.ax1.clear()        
+        self.ui.mpl.canvas.ax2.clear()
+        if self.numerodefilas is not 0:
+            lista=[]
+            operaciones = []
+            x=[]
+            suma=0
+    #        if re.match(self.listatotal,'Hucha'): numerofilas = match.group(1)
+            self.ui.mpl.canvas.ax1.clear()        
+            self.ui.mpl.canvas.ax2.clear()
+            self.ui.mpl.canvas.width= 600
+    
+            self.ui.mpl.canvas.ax1.axes.set_ylabel('Operaciones')
+            self.ui.mpl.canvas.ax2.axes.set_ylabel('Total', color='blue')
+            self.ui.mpl.canvas.ax1.axhline(y=0, color='black')
+            self.ui.mpl.canvas.ax2.axhline(y=0, color='black')
+            ancho = 0.5
+            huchatotal = 0
+            for operacion in range(self.numerodefilas):
+                fila = self.listatotal[operacion]            
+                if fila[1] == 'Hucha': 
+                    huchatotal += 1
+                    operaciones.append(fila[3])
+            if huchatotal is not 0:
+                for operacion in range(self.numerodefilas):
+                    fila = self.listatotal[operacion]
+                    if fila[1] == 'Hucha':
+                        x.append(len(lista)-(len(lista))/huchatotal+ ancho)
+                        if fila[0] == 'Ingreso':
+                            self.ui.mpl.canvas.ax1.bar(len(lista)-(len(lista))/huchatotal+ ancho/2,fila[3], width=ancho,  color = 'green')
+                            suma += fila[3]
+                            lista.append(suma)
+                            print 'altura' + str(fila[3])
+                        elif fila[0] == 'Gasto':
+                            
+                            self.ui.mpl.canvas.ax1.bar(len(lista)-(len(lista))/huchatotal + ancho/2,-fila[3], width=ancho,  color='red')
+                            suma -= fila[3]
+                            lista.append(suma)
+                        
+                    
+                    print 'LISTA= ' +  str(lista)
+                self.ui.mpl.canvas.ax1.axes.set_xlim(0,huchatotal)
+                self.ui.mpl.canvas.ax1.set_ylim(-1.1*max(operaciones),1.1*max(operaciones)) 
+                print 'max' + str(max(lista))
+                self.ui.mpl.canvas.ax2.plot(x,lista,'-o', color='blue')
+        self.ui.mpl.canvas.draw()
+        
+    def DibujarBanco(self):
+        self.ui.mpl.canvas.ax1.clear()        
+        self.ui.mpl.canvas.ax2.clear()
+        if self.numerodefilas is not 0:
+            lista=[]
+            operaciones = []
+            x = []
+            suma=0
+            ancho = 0.2
+            self.ui.mpl.canvas.ax1.clear()        
+            self.ui.mpl.canvas.ax2.clear()
+            self.ui.mpl.canvas.width= 600
+            self.ui.mpl.canvas.ax1.axes.set_xlim(0,self.numerodefilas)
+            self.ui.mpl.canvas.ax1.axes.set_ylabel('Operaciones')
+            self.ui.mpl.canvas.ax2.axes.set_ylabel('Total', color='blue')
+            self.ui.mpl.canvas.ax1.axhline(y=0, color='black')
+            self.ui.mpl.canvas.ax2.axhline(y=0, color='black')
+            ancho = 0.5
+            bancototal=0
+            
+            for operacion in range(self.numerodefilas):
+                fila = self.listatotal[operacion]            
+                if fila[1] == 'Banco': 
+                    bancototal += 1
+                    operaciones.append(fila[3])
+                print 'bancototal' + str(bancototal)
+                
+            if bancototal is not 0:
+                for operacion in range(self.numerodefilas):
+                    fila = self.listatotal[operacion]
+                    if fila[1] == 'Banco':
+                        x.append(len(lista)-(len(lista))/bancototal + ancho)
+                        if fila[0] == 'Ingreso':
+                            self.ui.mpl.canvas.ax1.bar(len(lista)-(len(lista))/bancototal + ancho/2 ,fila[3], width=ancho,  color = 'green')
+                            suma += fila[3]
+                            lista.append(suma)
+                        elif fila[0] == 'Gasto':
+        
+                            self.ui.mpl.canvas.ax1.bar(len(lista)-(len(lista))/bancototal + ancho/2,-fila[3], width=ancho,  color='red')
+                            suma -= fila[3]
+                            lista.append(suma)
+                        
+        
+                self.ui.mpl.canvas.ax1.set_ylim(-1.1*max(operaciones),1.1*max(operaciones))         
+                self.ui.mpl.canvas.ax1.axes.set_xlim(0,bancototal )
+                self.ui.mpl.canvas.ax2.plot(x,lista,'-o', color='blue')
+        self.ui.mpl.canvas.draw()
+        
+        
+if __name__ == "__main__":
+    app = QtGui.QApplication(sys.argv)
+    gestor = MMeelclass()
+    gestor.show()
+    sys.exit(app.exec_())
diff --git a/MMeel/MMeel.ui b/MMeel/MMeel.ui
new file mode 100644
index 0000000..2cb1b19
--- /dev/null
+++ b/MMeel/MMeel.ui
@@ -0,0 +1,571 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<ui version="4.0">
+ <class>Hucha</class>
+ <widget class="QMainWindow" name="Hucha">
+  <property name="geometry">
+   <rect>
+    <x>0</x>
+    <y>0</y>
+    <width>800</width>
+    <height>600</height>
+   </rect>
+  </property>
+  <property name="windowTitle">
+   <string>Hucha</string>
+  </property>
+  <widget class="QWidget" name="centralwidget">
+   <widget class="QComboBox" name="combo_Tipo">
+    <property name="geometry">
+     <rect>
+      <x>180</x>
+      <y>20</y>
+      <width>111</width>
+      <height>29</height>
+     </rect>
+    </property>
+    <item>
+     <property name="text">
+      <string>Ingreso</string>
+     </property>
+    </item>
+    <item>
+     <property name="text">
+      <string>Gasto</string>
+     </property>
+    </item>
+   </widget>
+   <widget class="QComboBox" name="combo_Lugar">
+    <property name="geometry">
+     <rect>
+      <x>440</x>
+      <y>20</y>
+      <width>111</width>
+      <height>29</height>
+     </rect>
+    </property>
+    <item>
+     <property name="text">
+      <string>Banco</string>
+     </property>
+    </item>
+    <item>
+     <property name="text">
+      <string>Hucha</string>
+     </property>
+    </item>
+   </widget>
+   <widget class="QDateEdit" name="dateEdit">
+    <property name="geometry">
+     <rect>
+      <x>180</x>
+      <y>74</y>
+      <width>110</width>
+      <height>29</height>
+     </rect>
+    </property>
+    <property name="dateTime">
+     <datetime>
+      <hour>0</hour>
+      <minute>0</minute>
+      <second>0</second>
+      <year>2000</year>
+      <month>1</month>
+      <day>1</day>
+     </datetime>
+    </property>
+   </widget>
+   <widget class="QLabel" name="label">
+    <property name="geometry">
+     <rect>
+      <x>100</x>
+      <y>20</y>
+      <width>41</width>
+      <height>30</height>
+     </rect>
+    </property>
+    <property name="text">
+     <string>Tipo:</string>
+    </property>
+   </widget>
+   <widget class="QLabel" name="label_2">
+    <property name="geometry">
+     <rect>
+      <x>360</x>
+      <y>20</y>
+      <width>51</width>
+      <height>30</height>
+     </rect>
+    </property>
+    <property name="text">
+     <string>Lugar:</string>
+    </property>
+   </widget>
+   <widget class="QLabel" name="label_3">
+    <property name="geometry">
+     <rect>
+      <x>100</x>
+      <y>74</y>
+      <width>50</width>
+      <height>30</height>
+     </rect>
+    </property>
+    <property name="text">
+     <string>Fecha:</string>
+    </property>
+   </widget>
+   <widget class="QLabel" name="label_4">
+    <property name="geometry">
+     <rect>
+      <x>100</x>
+      <y>130</y>
+      <width>90</width>
+      <height>30</height>
+     </rect>
+    </property>
+    <property name="text">
+     <string>Comentarios:</string>
+    </property>
+   </widget>
+   <widget class="QPushButton" name="boton_Ok">
+    <property name="geometry">
+     <rect>
+      <x>610</x>
+      <y>120</y>
+      <width>41</width>
+      <height>41</height>
+     </rect>
+    </property>
+    <property name="toolTip">
+     <string>Ingresar nuevo movimiento</string>
+    </property>
+    <property name="text">
+     <string/>
+    </property>
+    <property name="icon">
+     <iconset>
+      <normaloff>../../../../../../usr/share/icons/Faenza/actions/24/dialog-ok.png</normaloff>../../../../../../usr/share/icons/Faenza/actions/24/dialog-ok.png</iconset>
+    </property>
+    <property name="iconSize">
+     <size>
+      <width>32</width>
+      <height>32</height>
+     </size>
+    </property>
+   </widget>
+   <widget class="QTextEdit" name="text_Cantidad">
+    <property name="geometry">
+     <rect>
+      <x>440</x>
+      <y>74</y>
+      <width>111</width>
+      <height>31</height>
+     </rect>
+    </property>
+   </widget>
+   <widget class="QLabel" name="label_5">
+    <property name="geometry">
+     <rect>
+      <x>350</x>
+      <y>80</y>
+      <width>67</width>
+      <height>21</height>
+     </rect>
+    </property>
+    <property name="text">
+     <string>Cantidad:</string>
+    </property>
+   </widget>
+   <widget class="QTextEdit" name="text_Comentarios">
+    <property name="geometry">
+     <rect>
+      <x>180</x>
+      <y>130</y>
+      <width>411</width>
+      <height>31</height>
+     </rect>
+    </property>
+   </widget>
+   <widget class="QGroupBox" name="groupBox">
+    <property name="geometry">
+     <rect>
+      <x>590</x>
+      <y>10</y>
+      <width>181</width>
+      <height>101</height>
+     </rect>
+    </property>
+    <property name="autoFillBackground">
+     <bool>false</bool>
+    </property>
+    <property name="title">
+     <string/>
+    </property>
+    <property name="flat">
+     <bool>false</bool>
+    </property>
+    <widget class="QLabel" name="label_6">
+     <property name="geometry">
+      <rect>
+       <x>30</x>
+       <y>0</y>
+       <width>51</width>
+       <height>30</height>
+      </rect>
+     </property>
+     <property name="text">
+      <string>Hucha:</string>
+     </property>
+    </widget>
+    <widget class="QLabel" name="label_8">
+     <property name="geometry">
+      <rect>
+       <x>30</x>
+       <y>60</y>
+       <width>51</width>
+       <height>30</height>
+      </rect>
+     </property>
+     <property name="text">
+      <string>Total:</string>
+     </property>
+    </widget>
+    <widget class="QLabel" name="label_Total">
+     <property name="geometry">
+      <rect>
+       <x>110</x>
+       <y>60</y>
+       <width>71</width>
+       <height>30</height>
+      </rect>
+     </property>
+     <property name="font">
+      <font>
+       <pointsize>14</pointsize>
+       <weight>75</weight>
+       <italic>true</italic>
+       <bold>true</bold>
+      </font>
+     </property>
+     <property name="text">
+      <string>0 â¬</string>
+     </property>
+    </widget>
+    <widget class="QLabel" name="label_Banco">
+     <property name="geometry">
+      <rect>
+       <x>110</x>
+       <y>30</y>
+       <width>71</width>
+       <height>30</height>
+      </rect>
+     </property>
+     <property name="font">
+      <font>
+       <pointsize>14</pointsize>
+       <weight>75</weight>
+       <italic>true</italic>
+       <bold>true</bold>
+      </font>
+     </property>
+     <property name="text">
+      <string>0 â¬</string>
+     </property>
+    </widget>
+    <widget class="QLabel" name="label_7">
+     <property name="geometry">
+      <rect>
+       <x>30</x>
+       <y>30</y>
+       <width>51</width>
+       <height>30</height>
+      </rect>
+     </property>
+     <property name="text">
+      <string>Banco:</string>
+     </property>
+    </widget>
+    <widget class="QLabel" name="label_Hucha">
+     <property name="geometry">
+      <rect>
+       <x>110</x>
+       <y>0</y>
+       <width>71</width>
+       <height>30</height>
+      </rect>
+     </property>
+     <property name="font">
+      <font>
+       <pointsize>14</pointsize>
+       <weight>75</weight>
+       <italic>true</italic>
+       <bold>true</bold>
+      </font>
+     </property>
+     <property name="text">
+      <string>0 â¬</string>
+     </property>
+    </widget>
+   </widget>
+   <widget class="QPushButton" name="boton_Cancelar">
+    <property name="enabled">
+     <bool>false</bool>
+    </property>
+    <property name="geometry">
+     <rect>
+      <x>680</x>
+      <y>120</y>
+      <width>41</width>
+      <height>41</height>
+     </rect>
+    </property>
+    <property name="toolTip">
+     <string>Cancelar edicion</string>
+    </property>
+    <property name="text">
+     <string/>
+    </property>
+    <property name="icon">
+     <iconset>
+      <normaloff>../../../../../../usr/share/icons/Faenza/actions/24/process-stop.png</normaloff>../../../../../../usr/share/icons/Faenza/actions/24/process-stop.png</iconset>
+    </property>
+   </widget>
+   <widget class="QTabWidget" name="tabWidget">
+    <property name="geometry">
+     <rect>
+      <x>10</x>
+      <y>170</y>
+      <width>771</width>
+      <height>411</height>
+     </rect>
+    </property>
+    <property name="currentIndex">
+     <number>0</number>
+    </property>
+    <widget class="QWidget" name="tab">
+     <attribute name="title">
+      <string>Tabla</string>
+     </attribute>
+     <widget class="QTableWidget" name="tableWidget">
+      <property name="geometry">
+       <rect>
+        <x>10</x>
+        <y>10</y>
+        <width>741</width>
+        <height>301</height>
+       </rect>
+      </property>
+      <property name="columnCount">
+       <number>5</number>
+      </property>
+      <attribute name="horizontalHeaderVisible">
+       <bool>false</bool>
+      </attribute>
+      <attribute name="horizontalHeaderCascadingSectionResizes">
+       <bool>false</bool>
+      </attribute>
+      <column>
+       <property name="text">
+        <string>Tipo</string>
+       </property>
+      </column>
+      <column>
+       <property name="text">
+        <string>Lugar</string>
+       </property>
+      </column>
+      <column>
+       <property name="text">
+        <string>Comentarios</string>
+       </property>
+      </column>
+      <column>
+       <property name="text">
+        <string>Fecha</string>
+       </property>
+      </column>
+      <column>
+       <property name="text">
+        <string>Cantidad</string>
+       </property>
+      </column>
+     </widget>
+     <widget class="QPushButton" name="boton_Editar">
+      <property name="geometry">
+       <rect>
+        <x>70</x>
+        <y>320</y>
+        <width>41</width>
+        <height>41</height>
+       </rect>
+      </property>
+      <property name="toolTip">
+       <string>Editar la entrada seleccionada (seleccione la fila completa)</string>
+      </property>
+      <property name="text">
+       <string/>
+      </property>
+      <property name="icon">
+       <iconset>
+        <normaloff>../../../../../../usr/share/icons/Faenza/actions/24/gtk-edit.png</normaloff>../../../../../../usr/share/icons/Faenza/actions/24/gtk-edit.png</iconset>
+      </property>
+     </widget>
+     <widget class="QPushButton" name="boton_Borrar">
+      <property name="geometry">
+       <rect>
+        <x>10</x>
+        <y>320</y>
+        <width>41</width>
+        <height>41</height>
+       </rect>
+      </property>
+      <property name="toolTip">
+       <string>Borrar la fila seleccionada (selecciones la fila completa)</string>
+      </property>
+      <property name="text">
+       <string/>
+      </property>
+      <property name="icon">
+       <iconset>
+        <normaloff>../../../../../../usr/share/icons/Faenza/actions/24/editdelete.png</normaloff>../../../../../../usr/share/icons/Faenza/actions/24/editdelete.png</iconset>
+      </property>
+      <property name="iconSize">
+       <size>
+        <width>24</width>
+        <height>24</height>
+       </size>
+      </property>
+     </widget>
+    </widget>
+    <widget class="QWidget" name="tab_2">
+     <attribute name="title">
+      <string>Grafica</string>
+     </attribute>
+     <widget class="MplWidget" name="mpl" native="true">
+      <property name="geometry">
+       <rect>
+        <x>10</x>
+        <y>10</y>
+        <width>741</width>
+        <height>301</height>
+       </rect>
+      </property>
+     </widget>
+     <widget class="QPushButton" name="boton_Hucha">
+      <property name="geometry">
+       <rect>
+        <x>20</x>
+        <y>320</y>
+        <width>99</width>
+        <height>29</height>
+       </rect>
+      </property>
+      <property name="text">
+       <string>Hucha</string>
+      </property>
+     </widget>
+     <widget class="QPushButton" name="boton_Banco">
+      <property name="geometry">
+       <rect>
+        <x>140</x>
+        <y>320</y>
+        <width>99</width>
+        <height>29</height>
+       </rect>
+      </property>
+      <property name="text">
+       <string>Banco</string>
+      </property>
+     </widget>
+     <widget class="QPushButton" name="boton_Total">
+      <property name="geometry">
+       <rect>
+        <x>260</x>
+        <y>320</y>
+        <width>99</width>
+        <height>29</height>
+       </rect>
+      </property>
+      <property name="text">
+       <string>Total</string>
+      </property>
+     </widget>
+    </widget>
+   </widget>
+   <widget class="QPushButton" name="boton_Nuevo">
+    <property name="geometry">
+     <rect>
+      <x>10</x>
+      <y>20</y>
+      <width>51</width>
+      <height>51</height>
+     </rect>
+    </property>
+    <property name="text">
+     <string/>
+    </property>
+    <property name="icon">
+     <iconset>
+      <normaloff>../../../../../../../usr/share/icons/Faenza/actions/48/stock_new-text.png</normaloff>../../../../../../../usr/share/icons/Faenza/actions/48/stock_new-text.png</iconset>
+    </property>
+    <property name="iconSize">
+     <size>
+      <width>48</width>
+      <height>48</height>
+     </size>
+    </property>
+   </widget>
+   <widget class="QPushButton" name="boton_Abrir">
+    <property name="geometry">
+     <rect>
+      <x>10</x>
+      <y>90</y>
+      <width>51</width>
+      <height>51</height>
+     </rect>
+    </property>
+    <property name="text">
+     <string/>
+    </property>
+    <property name="icon">
+     <iconset>
+      <normaloff>../../../../../../../usr/share/icons/Faenza/actions/48/fileopen.png</normaloff>../../../../../../../usr/share/icons/Faenza/actions/48/fileopen.png</iconset>
+    </property>
+    <property name="iconSize">
+     <size>
+      <width>48</width>
+      <height>48</height>
+     </size>
+    </property>
+   </widget>
+   <widget class="Line" name="line">
+    <property name="geometry">
+     <rect>
+      <x>70</x>
+      <y>20</y>
+      <width>20</width>
+      <height>131</height>
+     </rect>
+    </property>
+    <property name="lineWidth">
+     <number>2</number>
+    </property>
+    <property name="midLineWidth">
+     <number>0</number>
+    </property>
+    <property name="orientation">
+     <enum>Qt::Vertical</enum>
+    </property>
+   </widget>
+  </widget>
+ </widget>
+ <customwidgets>
+  <customwidget>
+   <class>MplWidget</class>
+   <extends>QWidget</extends>
+   <header>mplwidget</header>
+   <container>1</container>
+  </customwidget>
+ </customwidgets>
+ <resources/>
+ <connections/>
+</ui>
diff --git a/MMeel/MMeel_ui.py b/MMeel/MMeel_ui.py
new file mode 100644
index 0000000..e794514
--- /dev/null
+++ b/MMeel/MMeel_ui.py
@@ -0,0 +1,228 @@
+# -*- coding: utf-8 -*-
+
+# Form implementation generated from reading ui file 'huchagrafica.ui'
+#
+# Created: Fri Dec  2 12:46:08 2011
+#      by: PyQt4 UI code generator 4.8.5
+#
+# WARNING! All changes made in this file will be lost!
+
+from PyQt4 import QtCore, QtGui
+
+try:
+    _fromUtf8 = QtCore.QString.fromUtf8
+except AttributeError:
+    _fromUtf8 = lambda s: s
+
+class Ui_Hucha(object):
+    def setupUi(self, Hucha):
+        Hucha.setObjectName(_fromUtf8("Hucha"))
+        Hucha.resize(800, 600)
+        Hucha.setWindowTitle(QtGui.QApplication.translate("Hucha", "Hucha", None, QtGui.QApplication.UnicodeUTF8))
+        self.centralwidget = QtGui.QWidget(Hucha)
+        self.centralwidget.setObjectName(_fromUtf8("centralwidget"))
+        self.combo_Tipo = QtGui.QComboBox(self.centralwidget)
+        self.combo_Tipo.setGeometry(QtCore.QRect(170, 20, 111, 29))
+        self.combo_Tipo.setObjectName(_fromUtf8("combo_Tipo"))
+        self.combo_Tipo.addItem(_fromUtf8(""))
+        self.combo_Tipo.setItemText(0, QtGui.QApplication.translate("Hucha", "Ingreso", None, QtGui.QApplication.UnicodeUTF8))
+        self.combo_Tipo.addItem(_fromUtf8(""))
+        self.combo_Tipo.setItemText(1, QtGui.QApplication.translate("Hucha", "Gasto", None, QtGui.QApplication.UnicodeUTF8))
+        self.combo_Lugar = QtGui.QComboBox(self.centralwidget)
+        self.combo_Lugar.setGeometry(QtCore.QRect(430, 20, 111, 29))
+        self.combo_Lugar.setObjectName(_fromUtf8("combo_Lugar"))
+        self.combo_Lugar.addItem(_fromUtf8(""))
+        self.combo_Lugar.setItemText(0, QtGui.QApplication.translate("Hucha", "Banco", None, QtGui.QApplication.UnicodeUTF8))
+        self.combo_Lugar.addItem(_fromUtf8(""))
+        self.combo_Lugar.setItemText(1, QtGui.QApplication.translate("Hucha", "Hucha", None, QtGui.QApplication.UnicodeUTF8))
+        self.dateEdit = QtGui.QDateEdit(self.centralwidget)
+        self.dateEdit.setGeometry(QtCore.QRect(170, 74, 110, 29))
+        self.dateEdit.setDateTime(QtCore.QDateTime(QtCore.QDate(2000, 1, 1), QtCore.QTime(0, 0, 0)))
+        self.dateEdit.setObjectName(_fromUtf8("dateEdit"))
+        self.label = QtGui.QLabel(self.centralwidget)
+        self.label.setGeometry(QtCore.QRect(90, 20, 41, 30))
+        self.label.setText(QtGui.QApplication.translate("Hucha", "Tipo:", None, QtGui.QApplication.UnicodeUTF8))
+        self.label.setObjectName(_fromUtf8("label"))
+        self.label_2 = QtGui.QLabel(self.centralwidget)
+        self.label_2.setGeometry(QtCore.QRect(350, 20, 51, 30))
+        self.label_2.setText(QtGui.QApplication.translate("Hucha", "Lugar:", None, QtGui.QApplication.UnicodeUTF8))
+        self.label_2.setObjectName(_fromUtf8("label_2"))
+        self.label_3 = QtGui.QLabel(self.centralwidget)
+        self.label_3.setGeometry(QtCore.QRect(90, 74, 50, 30))
+        self.label_3.setText(QtGui.QApplication.translate("Hucha", "Fecha:", None, QtGui.QApplication.UnicodeUTF8))
+        self.label_3.setObjectName(_fromUtf8("label_3"))
+        self.label_4 = QtGui.QLabel(self.centralwidget)
+        self.label_4.setGeometry(QtCore.QRect(90, 130, 90, 30))
+        self.label_4.setText(QtGui.QApplication.translate("Hucha", "Comentarios:", None, QtGui.QApplication.UnicodeUTF8))
+        self.label_4.setObjectName(_fromUtf8("label_4"))
+        self.boton_Ok = QtGui.QPushButton(self.centralwidget)
+        self.boton_Ok.setGeometry(QtCore.QRect(600, 120, 41, 41))
+        self.boton_Ok.setToolTip(QtGui.QApplication.translate("Hucha", "Ingresar nuevo movimiento", None, QtGui.QApplication.UnicodeUTF8))
+        self.boton_Ok.setText(_fromUtf8(""))
+        icon = QtGui.QIcon()
+        icon.addPixmap(QtGui.QPixmap(_fromUtf8("../../../../../../usr/share/icons/Faenza/actions/32/dialog-ok.png")), QtGui.QIcon.Normal, QtGui.QIcon.Off)
+        self.boton_Ok.setIcon(icon)
+        self.boton_Ok.setIconSize(QtCore.QSize(32, 32))
+        self.boton_Ok.setObjectName(_fromUtf8("boton_Ok"))
+        self.text_Cantidad = QtGui.QTextEdit(self.centralwidget)
+        self.text_Cantidad.setGeometry(QtCore.QRect(430, 74, 111, 31))
+        self.text_Cantidad.setObjectName(_fromUtf8("text_Cantidad"))
+        self.label_5 = QtGui.QLabel(self.centralwidget)
+        self.label_5.setGeometry(QtCore.QRect(340, 80, 67, 21))
+        self.label_5.setText(QtGui.QApplication.translate("Hucha", "Cantidad:", None, QtGui.QApplication.UnicodeUTF8))
+        self.label_5.setObjectName(_fromUtf8("label_5"))
+        self.text_Comentarios = QtGui.QTextEdit(self.centralwidget)
+        self.text_Comentarios.setGeometry(QtCore.QRect(170, 130, 411, 31))
+        self.text_Comentarios.setObjectName(_fromUtf8("text_Comentarios"))
+        self.groupBox = QtGui.QGroupBox(self.centralwidget)
+        self.groupBox.setGeometry(QtCore.QRect(580, 10, 181, 101))
+        self.groupBox.setAutoFillBackground(False)
+        self.groupBox.setTitle(_fromUtf8(""))
+        self.groupBox.setFlat(False)
+        self.groupBox.setObjectName(_fromUtf8("groupBox"))
+        self.label_6 = QtGui.QLabel(self.groupBox)
+        self.label_6.setGeometry(QtCore.QRect(20, 0, 51, 30))
+        self.label_6.setText(QtGui.QApplication.translate("Hucha", "Hucha:", None, QtGui.QApplication.UnicodeUTF8))
+        self.label_6.setObjectName(_fromUtf8("label_6"))
+        self.label_8 = QtGui.QLabel(self.groupBox)
+        self.label_8.setGeometry(QtCore.QRect(20, 60, 51, 30))
+        self.label_8.setText(QtGui.QApplication.translate("Hucha", "Total:", None, QtGui.QApplication.UnicodeUTF8))
+        self.label_8.setObjectName(_fromUtf8("label_8"))
+        self.label_Total = QtGui.QLabel(self.groupBox)
+        self.label_Total.setGeometry(QtCore.QRect(100, 60, 71, 30))
+        font = QtGui.QFont()
+        font.setPointSize(14)
+        font.setBold(True)
+        font.setItalic(True)
+        font.setWeight(75)
+        self.label_Total.setFont(font)
+        self.label_Total.setText(QtGui.QApplication.translate("Hucha", "0 â¬", None, QtGui.QApplication.UnicodeUTF8))
+        self.label_Total.setObjectName(_fromUtf8("label_Total"))
+        self.label_Banco = QtGui.QLabel(self.groupBox)
+        self.label_Banco.setGeometry(QtCore.QRect(100, 30, 71, 30))
+        font = QtGui.QFont()
+        font.setPointSize(14)
+        font.setBold(True)
+        font.setItalic(True)
+        font.setWeight(75)
+        self.label_Banco.setFont(font)
+        self.label_Banco.setText(QtGui.QApplication.translate("Hucha", "0 â¬", None, QtGui.QApplication.UnicodeUTF8))
+        self.label_Banco.setObjectName(_fromUtf8("label_Banco"))
+        self.label_7 = QtGui.QLabel(self.groupBox)
+        self.label_7.setGeometry(QtCore.QRect(20, 30, 51, 30))
+        self.label_7.setText(QtGui.QApplication.translate("Hucha", "Banco:", None, QtGui.QApplication.UnicodeUTF8))
+        self.label_7.setObjectName(_fromUtf8("label_7"))
+        self.label_Hucha = QtGui.QLabel(self.groupBox)
+        self.label_Hucha.setGeometry(QtCore.QRect(100, 0, 71, 30))
+        font = QtGui.QFont()
+        font.setPointSize(14)
+        font.setBold(True)
+        font.setItalic(True)
+        font.setWeight(75)
+        self.label_Hucha.setFont(font)
+        self.label_Hucha.setText(QtGui.QApplication.translate("Hucha", "0 â¬", None, QtGui.QApplication.UnicodeUTF8))
+        self.label_Hucha.setObjectName(_fromUtf8("label_Hucha"))
+        self.boton_Cancelar = QtGui.QPushButton(self.centralwidget)
+        self.boton_Cancelar.setEnabled(False)
+        self.boton_Cancelar.setGeometry(QtCore.QRect(670, 120, 41, 41))
+        self.boton_Cancelar.setToolTip(QtGui.QApplication.translate("Hucha", "Cancelar edicion", None, QtGui.QApplication.UnicodeUTF8))
+        self.boton_Cancelar.setText(_fromUtf8(""))
+        icon1 = QtGui.QIcon()
+        icon1.addPixmap(QtGui.QPixmap(_fromUtf8("../../../../../../usr/share/icons/Faenza/actions/24/process-stop.png")), QtGui.QIcon.Normal, QtGui.QIcon.Off)
+        self.boton_Cancelar.setIcon(icon1)
+        self.boton_Cancelar.setObjectName(_fromUtf8("boton_Cancelar"))
+        self.tabWidget = QtGui.QTabWidget(self.centralwidget)
+        self.tabWidget.setGeometry(QtCore.QRect(10, 170, 771, 411))
+        self.tabWidget.setObjectName(_fromUtf8("tabWidget"))
+        self.tab = QtGui.QWidget()
+        self.tab.setObjectName(_fromUtf8("tab"))
+        self.tableWidget = QtGui.QTableWidget(self.tab)
+        self.tableWidget.setGeometry(QtCore.QRect(10, 10, 741, 301))
+        self.tableWidget.setColumnCount(5)
+        self.tableWidget.setObjectName(_fromUtf8("tableWidget"))
+        self.tableWidget.setRowCount(0)
+        item = QtGui.QTableWidgetItem()
+        item.setText(QtGui.QApplication.translate("Hucha", "Tipo", None, QtGui.QApplication.UnicodeUTF8))
+        self.tableWidget.setHorizontalHeaderItem(0, item)
+        item = QtGui.QTableWidgetItem()
+        item.setText(QtGui.QApplication.translate("Hucha", "Lugar", None, QtGui.QApplication.UnicodeUTF8))
+        self.tableWidget.setHorizontalHeaderItem(1, item)
+        item = QtGui.QTableWidgetItem()
+        item.setText(QtGui.QApplication.translate("Hucha", "Comentarios", None, QtGui.QApplication.UnicodeUTF8))
+        self.tableWidget.setHorizontalHeaderItem(2, item)
+        item = QtGui.QTableWidgetItem()
+        item.setText(QtGui.QApplication.translate("Hucha", "Fecha", None, QtGui.QApplication.UnicodeUTF8))
+        self.tableWidget.setHorizontalHeaderItem(3, item)
+        item = QtGui.QTableWidgetItem()
+        item.setText(QtGui.QApplication.translate("Hucha", "Cantidad", None, QtGui.QApplication.UnicodeUTF8))
+        self.tableWidget.setHorizontalHeaderItem(4, item)
+        self.tableWidget.horizontalHeader().setVisible(False)
+        self.tableWidget.horizontalHeader().setCascadingSectionResizes(False)
+        self.boton_Editar = QtGui.QPushButton(self.tab)
+        self.boton_Editar.setGeometry(QtCore.QRect(70, 320, 41, 41))
+        self.boton_Editar.setToolTip(QtGui.QApplication.translate("Hucha", "Editar la entrada seleccionada (seleccione la fila completa)", None, QtGui.QApplication.UnicodeUTF8))
+        self.boton_Editar.setText(_fromUtf8(""))
+        icon2 = QtGui.QIcon()
+        icon2.addPixmap(QtGui.QPixmap(_fromUtf8("../../../../../../usr/share/icons/Faenza/actions/24/gtk-edit.png")), QtGui.QIcon.Normal, QtGui.QIcon.Off)
+        self.boton_Editar.setIcon(icon2)
+        self.boton_Editar.setObjectName(_fromUtf8("boton_Editar"))
+        self.boton_Borrar = QtGui.QPushButton(self.tab)
+        self.boton_Borrar.setGeometry(QtCore.QRect(10, 320, 41, 41))
+        self.boton_Borrar.setToolTip(QtGui.QApplication.translate("Hucha", "Borrar la fila seleccionada (selecciones la fila completa)", None, QtGui.QApplication.UnicodeUTF8))
+        self.boton_Borrar.setText(_fromUtf8(""))
+        icon3 = QtGui.QIcon()
+        icon3.addPixmap(QtGui.QPixmap(_fromUtf8("../../../../../../usr/share/icons/Faenza/actions/24/editdelete.png")), QtGui.QIcon.Normal, QtGui.QIcon.Off)
+        self.boton_Borrar.setIcon(icon3)
+        self.boton_Borrar.setIconSize(QtCore.QSize(24, 24))
+        self.boton_Borrar.setObjectName(_fromUtf8("boton_Borrar"))
+        self.tabWidget.addTab(self.tab, _fromUtf8(""))
+        self.tab_2 = QtGui.QWidget()
+        self.tab_2.setObjectName(_fromUtf8("tab_2"))
+        self.mpl = MplWidget(self.tab_2)
+        self.mpl.setGeometry(QtCore.QRect(10, 10, 741, 301))
+        self.mpl.setObjectName(_fromUtf8("mpl"))
+        self.boton_Hucha = QtGui.QPushButton(self.tab_2)
+        self.boton_Hucha.setGeometry(QtCore.QRect(20, 320, 99, 29))
+        self.boton_Hucha.setText(QtGui.QApplication.translate("Hucha", "Hucha", None, QtGui.QApplication.UnicodeUTF8))
+        self.boton_Hucha.setObjectName(_fromUtf8("boton_Hucha"))
+        self.boton_Banco = QtGui.QPushButton(self.tab_2)
+        self.boton_Banco.setGeometry(QtCore.QRect(140, 320, 99, 29))
+        self.boton_Banco.setText(QtGui.QApplication.translate("Hucha", "Banco", None, QtGui.QApplication.UnicodeUTF8))
+        self.boton_Banco.setObjectName(_fromUtf8("boton_Banco"))
+        self.boton_Total = QtGui.QPushButton(self.tab_2)
+        self.boton_Total.setGeometry(QtCore.QRect(260, 320, 99, 29))
+        self.boton_Total.setText(QtGui.QApplication.translate("Hucha", "Total", None, QtGui.QApplication.UnicodeUTF8))
+        self.boton_Total.setObjectName(_fromUtf8("boton_Total"))
+        self.tabWidget.addTab(self.tab_2, _fromUtf8(""))
+        self.boton_Nuevo = QtGui.QPushButton(self.centralwidget)
+        self.boton_Nuevo.setGeometry(QtCore.QRect(10, 20, 51, 51))
+        self.boton_Nuevo.setText(_fromUtf8(""))
+        icon4 = QtGui.QIcon()
+        icon4.addPixmap(QtGui.QPixmap(_fromUtf8("../../../../../../../usr/share/icons/Faenza/actions/48/stock_new-text.png")), QtGui.QIcon.Normal, QtGui.QIcon.Off)
+        self.boton_Nuevo.setIcon(icon4)
+        self.boton_Nuevo.setIconSize(QtCore.QSize(48, 48))
+        self.boton_Nuevo.setObjectName(_fromUtf8("boton_Nuevo"))
+        self.boton_Abrir = QtGui.QPushButton(self.centralwidget)
+        self.boton_Abrir.setGeometry(QtCore.QRect(10, 90, 51, 51))
+        self.boton_Abrir.setText(_fromUtf8(""))
+        icon5 = QtGui.QIcon()
+        icon5.addPixmap(QtGui.QPixmap(_fromUtf8("../../../../../../../usr/share/icons/Faenza/actions/48/fileopen.png")), QtGui.QIcon.Normal, QtGui.QIcon.Off)
+        self.boton_Abrir.setIcon(icon5)
+        self.boton_Abrir.setIconSize(QtCore.QSize(48, 48))
+        self.boton_Abrir.setObjectName(_fromUtf8("boton_Abrir"))
+        Hucha.setCentralWidget(self.centralwidget)
+
+        self.retranslateUi(Hucha)
+        self.tabWidget.setCurrentIndex(1)
+        QtCore.QMetaObject.connectSlotsByName(Hucha)
+
+    def retranslateUi(self, Hucha):
+        item = self.tableWidget.horizontalHeaderItem(0)
+        item = self.tableWidget.horizontalHeaderItem(1)
+        item = self.tableWidget.horizontalHeaderItem(2)
+        item = self.tableWidget.horizontalHeaderItem(3)
+        item = self.tableWidget.horizontalHeaderItem(4)
+        self.tabWidget.setTabText(self.tabWidget.indexOf(self.tab), QtGui.QApplication.translate("Hucha", "Tabla", None, QtGui.QApplication.UnicodeUTF8))
+        self.tabWidget.setTabText(self.tabWidget.indexOf(self.tab_2), QtGui.QApplication.translate("Hucha", "Grafica", None, QtGui.QApplication.UnicodeUTF8))
+
+from mplwidget import MplWidget
diff --git a/MMeel/mplwidget.py b/MMeel/mplwidget.py
new file mode 100644
index 0000000..c46a8a3
--- /dev/null
+++ b/MMeel/mplwidget.py
@@ -0,0 +1,42 @@
+# -*- coding: utf-8 -*-
+"""
+Created on Sat Nov 26 14:23:33 2011
+
+@author: - Daniel Rodriguez
+"""
+# Python Qt4 bindings for GUI objects
+from PyQt4 import QtGui
+# import the Qt4Agg FigureCanvas object, that binds Figure to
+# Qt4Agg backend. It also inherits from QWidget
+from matplotlib.backends.backend_qt4agg \
+import FigureCanvasQTAgg as FigureCanvas
+# Matplotlib Figure object
+from matplotlib.figure import Figure
+class MplCanvas(FigureCanvas):
+#"""Class to represent the FigureCanvas widget"""
+    def __init__(self):
+        # setup Matplotlib Figure and Axis
+        self.fig = Figure()
+        self.ax1 = self.fig.add_subplot(111)
+        self.ax2 = self.ax1.twinx()
+        # initialization of the canvas
+        FigureCanvas.__init__(self, self.fig)
+        # we define the widget as expandable
+        FigureCanvas.setSizePolicy(self,
+        QtGui.QSizePolicy.Expanding,
+        QtGui.QSizePolicy.Expanding)
+        # notify the system of updated policy
+        FigureCanvas.updateGeometry(self)
+class MplWidget(QtGui.QWidget):
+#"""Widget defined in Qt Designer"""
+    def __init__(self, parent = None):
+        # initialization of Qt MainWindow widget
+        QtGui.QWidget.__init__(self, parent)
+        # set the canvas to the Matplotlib widget
+        self.canvas = MplCanvas()
+        # create a vertical box layout
+        self.vbl = QtGui.QVBoxLayout()
+        # add mpl widget to vertical box
+        self.vbl.addWidget(self.canvas)
+        # set the layout to th vertical box
+        self.setLayout(self.vbl)
-- 
1.7.5.4

